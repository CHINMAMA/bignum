#include <gtest/gtest.h>
#include <stdexcept>
#include "../BigNum/bignum.hpp"
#include "../calculate_pi.cpp"

using namespace bignum;

TEST(bignum_operations, add) {
    BigNum::set_default_precision(100);
	EXPECT_EQ(
		(8047162254025582676778.08032577531_bn).to_string(),
		(8045177191136728398165.22839965_bn +
		1985062888854278612.85192612531_bn).to_string()
	);
	EXPECT_EQ(
		(-758865522.9417854587188773744782953_bn).to_string(),
		(-758904241.163615464782597809484_bn +
		38718.2218300060637204350057047_bn).to_string()
	);
	EXPECT_EQ(
		(648041867890506278.63863228957724801272071214253_bn).to_string(),
		(648041867890506269.68099527411_bn +
		8.95763701546724801272071214253_bn).to_string()
	);
	EXPECT_EQ(
		(4054785959098410374808320.00613013034195148834899891_bn).to_string(),
		(8596.84487013034195148834899891_bn +
		4054785959098410374799723.16126_bn).to_string()
	);
	EXPECT_EQ(
		(6309032617522251306.9039649945351157282580883026_bn).to_string(),
		(1.5667573322851157282580883026_bn +
		6309032617522251305.33720766225_bn).to_string()
	);
	EXPECT_EQ(
		(4341700561.224410090303554450233973958811_bn).to_string(),
		(4341700560.72103228759130457682_bn +
		0.503377802712249873413973958811_bn).to_string()
	);
	EXPECT_EQ(
		(1985866751250.91695981112101978_bn).to_string(),
		(-4509402434732.76003692356630417_bn +
		6495269185983.67699673468732395_bn).to_string()
	);
	EXPECT_EQ(
		(356150687592988576786964760763.1760824996536279499_bn).to_string(),
		(356150687592988576784677022892_bn +
		2287737871.1760824996536279499_bn).to_string()
	);
	EXPECT_EQ(
		(578829961973619398389328272.8122951468_bn).to_string(),
		(376306594412220563.8882951468_bn +
		578829961597312803977107708.924_bn).to_string()
	);
	EXPECT_EQ(
		(-198172898576094461125809098.08769926385380532614484287874_bn).to_string(),
		(-198172898576094461125809103.914_bn +
		5.82630073614619467385515712126_bn).to_string()
	);
	EXPECT_EQ(
		(8108103310470.5144770087049173619442871892_bn).to_string(),
		(8108103310468.27886223956143409_bn +
		2.2356147691434832719442871892_bn).to_string()
	);
	EXPECT_EQ(
		(549176683412414719378.23269930050648_bn).to_string(),
		(-8392511101362156.48367775549352_bn +
		549185075923516081534.716377056_bn).to_string()
	);
	EXPECT_EQ(
		(-259780134877124659718.32712864972329764040456_bn).to_string(),
		(-259780134877124823678.03391936_bn +
		163959.70679071027670235959544_bn).to_string()
	);
	EXPECT_EQ(
		(-0.073664816521745650051687961242_bn).to_string(),
		(-0.549905642587637152228958052192_bn +
		0.47624082606589150217727009095_bn).to_string()
	);
	EXPECT_EQ(
		(-443736966769136650321.7318752848135992581532518412_bn).to_string(),
		(-443736966769136650357.382250928_bn +
		35.6503756431864007418467481588_bn).to_string()
	);
	EXPECT_EQ(
		(55372210669253452035804807861.395206847520734510472478611815_bn).to_string(),
		(55372210669253452035804807860.7_bn +
		0.695206847520734510472478611815_bn).to_string()
	);
	EXPECT_EQ(
		(3621900679325036583198994921.21267688485_bn).to_string(),
		(-8473547945035452291.68732311515_bn +
		3621900687798584528234447212.9_bn).to_string()
	);
	EXPECT_EQ(
		(38257209489287757402303177.90304029355137_bn).to_string(),
		(3468437904628166.09074029355137_bn +
		38257209485819319497675011.8123_bn).to_string()
	);
	EXPECT_EQ(
		(221289028925624423135080127.64176978589958484847_bn).to_string(),
		(-18218599.18223021410041515153_bn +
		221289028925624423153298726.824_bn).to_string()
	);
	EXPECT_EQ(
		(551155457369404191.387638715767254_bn).to_string(),
		(550762865440344887.595982773892_bn +
		392591929059303.791655941875254_bn).to_string()
	);
}
TEST(bignum_operations, sub) {
    BigNum::set_default_precision(100);
	EXPECT_EQ(
		(-992233918.83912412576038434721312_bn).to_string(),
		(7652203.49774736070626335831688_bn -
		999886122.33687148646664770553_bn).to_string()
	);
	EXPECT_EQ(
		(82760602216273753.44337806114134035669435406373_bn).to_string(),
		(82760602216273760.657859285685_bn -
		7.21448122454365964330564593627_bn).to_string()
	);
	EXPECT_EQ(
		(-45613227.42093274525856981749961788_bn).to_string(),
		(-3670.87152262597266279394581788_bn -
		45609556.5494101192859070235538_bn).to_string()
	);
	EXPECT_EQ(
		(3566291546609152962.486990534683566_bn).to_string(),
		(3566300167310181974.33150974995_bn -
		8620701029011.844519215266434_bn).to_string()
	);
	EXPECT_EQ(
		(-3237073484781953341342.3880444198565411696609946_bn).to_string(),
		(7133.1077757801434588303390054_bn -
		3237073484781953348475.4958202_bn).to_string()
	);
	EXPECT_EQ(
		(7144430923.6433301164105535945387167_bn).to_string(),
		(7144501870.86449187576758858635_bn -
		70947.2211617593570349918112833_bn).to_string()
	);
	EXPECT_EQ(
		(-8865317005.7141903530616573336986942825_bn).to_string(),
		(52.2848452389979013398313057175_bn -
		8865317057.99903559205955867353_bn).to_string()
	);
	EXPECT_EQ(
		(-57390045054.3086541411673098096224156875_bn).to_string(),
		(17.0410710234795631397775843125_bn -
		57390045071.3497251646468729494_bn).to_string()
	);
	EXPECT_EQ(
		(-875854494615667719299256062.558_bn).to_string(),
		(874600496628215518050394195.922_bn -
		1750454991243883237349650258.48_bn).to_string()
	);
	EXPECT_EQ(
		(-718504861604995700110.49028564453_bn).to_string(),
		(-3766369881376027511.82749792553_bn -
		714738491723619672598.662787719_bn).to_string()
	);
	EXPECT_EQ(
		(-872834354847071742574790.27797862353861164639972_bn).to_string(),
		(4684804.15760137646138835360028_bn -
		872834354847071747259594.43558_bn).to_string()
	);
	EXPECT_EQ(
		(-838677441248229964.3757221702953_bn).to_string(),
		(-755159373796660683.043476771824_bn -
		83518067451569281.3322453984713_bn).to_string()
	);
	EXPECT_EQ(
		(-9860322952768580.486501760455513146734027971_bn).to_string(),
		(190.319065074683236853265972029_bn -
		9860322952768770.80556683513875_bn).to_string()
	);
	EXPECT_EQ(
		(-3127597629036.085299141221105707219640608166_bn).to_string(),
		(-0.945722328043214807219640608166_bn -
		3127597629035.1395768131778909_bn).to_string()
	);
	EXPECT_EQ(
		(23976431989100414712.90622313274545561112_bn).to_string(),
		(23976431993681776904.627495987_bn -
		4581362191.72127285425454438888_bn).to_string()
	);
	EXPECT_EQ(
		(-171001987510655509816471.8340655234650381380125948_bn).to_string(),
		(-171001987510655509727280.57564_bn -
		89191.2584255234650381380125948_bn).to_string()
	);
	EXPECT_EQ(
		(-137558878805.71142169939589854405164105753_bn).to_string(),
		(9.03071715854896559794835894247_bn -
		137558878814.742138857944864142_bn).to_string()
	);
	EXPECT_EQ(
		(-9859251079736659969925.6072276090924891_bn).to_string(),
		(80011727681378.1330773409075109_bn -
		9859251159748387651303.74030495_bn).to_string()
	);
	EXPECT_EQ(
		(153123103648334588400888992988.294372808_bn).to_string(),
		(153123103916109478220541098215_bn -
		267774889819652105226.705627192_bn).to_string()
	);
	EXPECT_EQ(
		(-945313243812121.770656040538128188384245_bn).to_string(),
		(28037.171316700053368811615755_bn -
		945313243840158.941972740591497_bn).to_string()
	);
}
TEST(bignum_operations, mult) {
    BigNum::set_default_precision(100);
	EXPECT_EQ(
		(-1653679708073869748223003756.51839171246386084985938055831946_bn).to_string(),
		(-5589535941.03606898628549332902_bn *
		295852773024185235.954683567623_bn).to_string()
	);
	EXPECT_EQ(
		(-4782193066121832136190895.71898079703875115199092897917883_bn).to_string(),
		(-1.375053010912903397487558949_bn *
		3477824511614220839146239.96767_bn).to_string()
	);
	EXPECT_EQ(
		(-228697266535971213614113662047706.89095997117096207301250482_bn).to_string(),
		(-266228.423001364759480282185507_bn *
		859026485443287357316808539.26_bn).to_string()
	);
	EXPECT_EQ(
		(106669122923788429513.31463915882963441420888571756055284875_bn).to_string(),
		(1763381806199494634.02255087463_bn *
		60.491223482500167648376504125_bn).to_string()
	);
	EXPECT_EQ(
		(-3057089131088989557.10265113708803381136117823473493378641026_bn).to_string(),
		(-742.883211292702693169694984609_bn *
		4115167881865712.04559787528514_bn).to_string()
	);
	EXPECT_EQ(
		(404218901541554470625897.3356838554203527523713536205088262_bn).to_string(),
		(3445701336891684.16990077479207_bn *
		117311067.33301334765796585866_bn).to_string()
	);
	EXPECT_EQ(
		(7960618383880451336771380882504637083647.7027311311042276148_bn).to_string(),
		(8479618270234.5537976739341281_bn *
		938794428025620726255032553.908_bn).to_string()
	);
	EXPECT_EQ(
		(34463271995373728667071641203516068462621459952066326.6617394_bn).to_string(),
		(558189511915782953764591039447_bn *
		61741167219518426568763.5145502_bn).to_string()
	);
	EXPECT_EQ(
		(-6267035488547007202941163101686804770251329.88368023568584722_bn).to_string(),
		(-7144571199443428393378452401.53_bn *
		877174474660595.111654905547874_bn).to_string()
	);
	EXPECT_EQ(
		(710523313679252.77432529575734347268207730419760470640649014_bn).to_string(),
		(7.7536824101960324773744611671_bn *
		91636886332218.1090569982658234_bn).to_string()
	);
	EXPECT_EQ(
		(-1580008369579.81740269724048142052347193625103591911826125704_bn).to_string(),
		(-635236975.749812043844315721048_bn *
		2487.27393066946308209040496723_bn).to_string()
	);
	EXPECT_EQ(
		(-1196195678954910176720211046040613668.99343550688251386089581_bn).to_string(),
		(-69272078995944597.4256395780133_bn *
		17268078225643252104.6573734057_bn).to_string()
	);
	EXPECT_EQ(
		(-5343102589828144391125242540076239030139158514.9442194592104_bn).to_string(),
		(-5710943018102091521.41593925681_bn *
		935590247160933686516195629.84_bn).to_string()
	);
	EXPECT_EQ(
		(-640218133437986071081487079852312086228464498641957.036141532_bn).to_string(),
		(-98883608246171053579326169.9324_bn *
		6474461690800774738094860.53193_bn).to_string()
	);
	EXPECT_EQ(
		(-12517451477913919704074427204922708685.7266988328547457508752_bn).to_string(),
		(-587882148295058532876.012231656_bn *
		21292450390297275.2467013833242_bn).to_string()
	);
	EXPECT_EQ(
		(12845276042070269872520127399845428367.3131666662764119358230_bn).to_string(),
		(136651848342610426581361890970_bn *
		94000016.8154687817519831650359_bn).to_string()
	);
	EXPECT_EQ(
		(-1686792539636145276720542681633885.2056900168352625724255936_bn).to_string(),
		(-26245973.207081150524801283984_bn *
		64268622326454615445744380.5004_bn).to_string()
	);
	EXPECT_EQ(
		(4849972483394439945666892402131192052636.22609154270008031652_bn).to_string(),
		(524652959516405655036732487036_bn *
		9244153483.59963564164045828407_bn).to_string()
	);
	EXPECT_EQ(
		(-2950074715514223869557746467.4172267260078797863346947446373_bn).to_string(),
		(-0.034225094273677076774261423873_bn *
		86196248048998394996336058250.1_bn).to_string()
	);
	EXPECT_EQ(
		(11311187252697202195.7203513077658912085000976039671703690404_bn).to_string(),
		(438973.025326364389578903473716_bn *
		25767385693659.9807989678669069_bn).to_string()
	);
}
TEST(bignum_operations, div) {
    BigNum::set_default_precision(100);
	EXPECT_EQ(
		(-20644469797301.652240795819327173825250518452607310835813555310688800997415185166952340289044677888897539120467_bn).to_string(),
		(-1375219241765299095.57750420852_bn /
		66614.4132190330191099305106636_bn).to_string()
	);
	EXPECT_EQ(
		(-21210965312518429.122997718806737886108026294423142035227150019367298432481737961783915385063072485189605874265_bn).to_string(),
		(-679395681038918066721737.884509_bn /
		32030398.948318857874227326643_bn).to_string()
	);
	EXPECT_EQ(
		(0.087142593168797091175169836606948797351102147628967352284834069537189024517659139457026764971241756896630287602_bn).to_string(),
		(342.75457867728533912033150898_bn /
		3933.26117818599101601572552023_bn).to_string()
	);
	EXPECT_EQ(
		(-0.75873403856670939303506629986155505380267585543165257600769691747236301291589367079180038612527462717835453865_bn).to_string(),
		(-99357.8131558275020752698998264_bn /
		130952.096657637651497784434502_bn).to_string()
	);
	EXPECT_EQ(
		(-38.875617917046868388611437463518365326242645296379831223959554951884589214092845127164281509608630880214288802_bn).to_string(),
		(-195631643242248822537942964.386_bn /
		5032245240697892552867943.10998_bn).to_string()
	);
	EXPECT_EQ(
		(1.1626132774550563124591602489709094749271213793248060494259710244435098428121539647326191131748418263166349256_bn).to_string(),
		(807897.25916089214476606665801_bn /
		694897.671330029523578342809844_bn).to_string()
	);
	EXPECT_EQ(
		(31.634322189527894187608105795516096206830449957784400979409145089738364407158859474414086468185045621439068382_bn).to_string(),
		(18.0904158769757408933289441261_bn /
		0.571860391652846079459651536786_bn).to_string()
	);
	EXPECT_EQ(
		(2377878962024861384890883.2742059721499708601779318170031076467457759429160015239104919805081941012150084949709_bn).to_string(),
		(496798108270795990448215545061_bn /
		208924.893236681837577976646425_bn).to_string()
	);
	EXPECT_EQ(
		(-239467730528958605461942.08352179488253607785702627021624290299294286733454115722427884273552135483248103545381_bn).to_string(),
		(-47550253487469898263509999381.4_bn /
		198566.434744407832527406962739_bn).to_string()
	);
	EXPECT_EQ(
		(-113899858339069.39937251189878151933566283661008845880164377815293404017483436746121452864650684408100468717749_bn).to_string(),
		(-7583765886418753156993.2332668_bn /
		66582750.821713753385935984411_bn).to_string()
	);
	EXPECT_EQ(
		(-379130596995.69473901075160785496319613474449962923816332751596982762717729304826070719962252519318852604267808_bn).to_string(),
		(-11951573841110.3189187322488768_bn /
		31.5236331116953781142792067787_bn).to_string()
	);
	EXPECT_EQ(
		(0.0054017232428193729750994551561409516473057924330297980795128531717921303795327482819942563839057784821023604441_bn).to_string(),
		(3906189130954162295160.9183061_bn /
		723137590609949078938130.555691_bn).to_string()
	);
	EXPECT_EQ(
		(721059.88610016907236121786223575956992761476737749998762437579430838642578959049409836960513965788347049904847_bn).to_string(),
		(647906179293.55308014440963369_bn /
		898546.974784208787905442879957_bn).to_string()
	);
	EXPECT_EQ(
		(-2.4524089173526059050752960277075180301124126068804888956256768792398430900636645418051137572896772330479538296_bn).to_string(),
		(-2107648524951031860200901.68744_bn /
		859419695483025109484860.969199_bn).to_string()
	);
	EXPECT_EQ(
		(0.0074414745626165913344933106658912767229935026496084661174511947787642074702512552963596420234277596414039705775_bn).to_string(),
		(460137607.525360427927814398358_bn /
		61834197463.6228014826608137498_bn).to_string()
	);
	EXPECT_EQ(
		(1038881137234438282.8574010836869648324196789406119130003308782165279832722434041586616029905220572380858845690_bn).to_string(),
		(9709817228143188431.08291094029_bn /
		9.34641787220363235284708707259_bn).to_string()
	);
	EXPECT_EQ(
		(63976223208360462.645888342959103780280523901755699128398144714454299522201096434453462055997693033770962474712_bn).to_string(),
		(4927333869155305338316.01159163_bn /
		77018.2049213464278556806247727_bn).to_string()
	);
	EXPECT_EQ(
		(0.0033841432270469906205617569202775378983897079778432602321955360706535915411467904537839166799165821889001300216_bn).to_string(),
		(5888175539357196.37871470274441_bn /
		1739930949818347018.69376035093_bn).to_string()
	);
	EXPECT_EQ(
		(-12473440262510481158.222679861472274603051379168412784663633611292877389370211337585765092496928188601433846418_bn).to_string(),
		(-23227395246107018547.0690300279_bn /
		1.86214827323285151111158307204_bn).to_string()
	);
	EXPECT_EQ(
		(118312891.35494864824129524997966816803974060483558417785262099842431238911688181896703952755128451278477002300_bn).to_string(),
		(7315979592982799905568439.85961_bn /
		61835861749285159.1702214252137_bn).to_string()
	);
	EXPECT_EQ(
		(0.00028953008954288190107097590507036434907544856909187634296351965488503941630958207187719921522306050136345893694_bn).to_string(),
		(9042.09022378301447007867777945_bn /
		31230226.3231393882274388857447_bn).to_string()
	);
	EXPECT_EQ(
		(0.0000013162300426059196264475272213710526111567872436446497881447458594008111091106429579241949954254268228400656150_bn).to_string(),
		(1791038958314.49759657704985765_bn /
		1360733990517747326.53312539222_bn).to_string()
	);
	EXPECT_EQ(
		(1323437673392835841340318.6076911569670818746444971293553105580130555849248749820017361322030055805113942017701_bn).to_string(),
		(6641785032930199671509025949.46_bn /
		5018.58543583919832957850590429_bn).to_string()
	);
    EXPECT_THROW(666.666_bn / 0_bn, std::invalid_argument);
}
TEST(calculate_pi, precision_5) {
    BigNum pi = 3.14159_bn;
    EXPECT_EQ(pi.to_string(), calculate_pi(5).to_string());
}
TEST(calculate_pi, precision_100) {
    EXPECT_EQ(
        "3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679", 
        calculate_pi(100).to_string());
}
// TEST(bignum_operations, less) {
// 	BigNum::set_default_precision(100);
// 	EXPECT_EQ(
// 		0,
// 		696582501162332153.294093715418_bn <
// 		-40273777260005467458291.5411525_bn
// 	);
// 	EXPECT_EQ(
// 		0,
// 		251352047630005052092252811.639_bn <
// 		-517525478.87806177724107161321_bn
// 	);
// 	EXPECT_EQ(
// 		1,
// 		19176437382579601103.6263097449_bn <
// 		48806763711127959610724978.0435_bn
// 	);
// 	EXPECT_EQ(
// 		1,
// 		-219275.860101655332992972348319_bn <
// 		20378406.1847986639427741230542_bn
// 	);
// 	EXPECT_EQ(
// 		0,
// 		-839365380508211531.474477667577_bn <
// 		-35245426933995180556.4946225102_bn
// 	);
// }

TEST(bignum_operations, pow) {
	BigNum::set_default_precision(100);
	EXPECT_EQ(
		(-68.4277084279418661614139424_bn).to_string(),
		((-2.32834_bn).pow(5)).to_string()
	);
	EXPECT_EQ(
		(5.64585_bn).to_string(),
		((5.64585_bn).pow(1)).to_string()
	);
	EXPECT_EQ(
		(9642411.39334454792127709681_bn).to_string(),
		((-55.72453_bn).pow(4)).to_string()
	);
	EXPECT_EQ(
		(238892794109453708002914.7461592257_bn).to_string(),
		((47384.97_bn).pow(5)).to_string()
	);
	EXPECT_EQ(
		(0.63279972626641_bn).to_string(),
		((0.7954871_bn).pow(2)).to_string()
	);
    EXPECT_EQ(
		(1_bn).to_string(),
		((0.0000666607954871_bn).pow(0)).to_string()
	);
}
int main(int argc, char **argv) {
    testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
}